From 797060c56823e8af011393f81509cdfbcc7399bd Mon Sep 17 00:00:00 2001
From: Tom Cherry <tcherry@nvidia.com>
Date: Thu, 14 Jun 2012 17:33:38 -0700
Subject: [PATCH] Fix issue with DEBUG_OUT_DIR not properly selected

Bug 1001236

Change-Id: Ia37e0f6c9a7e240df1ec637d4c87492af1adb79d
Reviewed-on: http://git-psac/r/261
Reviewed-by: Dan Willemsen <dwillemsen@nvidia.com>
Tested-by: Thomas Cherry <tcherry@nvidia.com>
Reviewed-by: Simone Willett <swillett@nvidia.com>
Tested-by: Simone Willett <swillett@nvidia.com>
---
 core/pdk_config.mk |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/core/pdk_config.mk b/core/pdk_config.mk
index 9df2ce2..63f5f74 100644
--- a/core/pdk_config.mk
+++ b/core/pdk_config.mk
@@ -109,10 +109,17 @@ $(PRODUCT_OUT)/% : $(_pdk_fusion_intermediates)/% $(_pdk_fusion_stamp)
 ifeq (true,$(TARGET_BUILD_PDK_JAVA_PLATFORM))
 
 define JAVA_dependency_template
+ifeq (debug,$(TARGET_BUILD_TYPE))
+$(DEBUG_OUT_DIR)/$(strip $(1)): $(_pdk_fusion_intermediates)/$(strip $(1)) $(DEBUG_OUT_DIR)/$(strip $(2)) \
+  $(_pdk_fusion_stamp)
+	@mkdir -p $$(dir $$@)
+	$(hide) cp -fpPR $$< $$@
+else
 $(OUT_DIR)/$(strip $(1)): $(_pdk_fusion_intermediates)/$(strip $(1)) $(OUT_DIR)/$(strip $(2)) \
   $(_pdk_fusion_stamp)
 	@mkdir -p $$(dir $$@)
 	$(hide) cp -fpPR $$< $$@
+endif
 endef
 
 # needs explicit dependency as package-export.apk is not explicitly pulled
-- 
1.7.0.4

